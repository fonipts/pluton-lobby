name: django_graphbox
choices:
  - name: name
    question: What is your name
    type: input
  - name: database
    question: What is your Database choice?
    type: single_choice
    option:
      - postgres
      - mysql
      - none
  - name: redis
    question: Do you want Redis?
    type: single_choice
    option:
      - "yes"
      - "no"
  - name: docker
    question: Do you want Dockerfile?
    type: single_choice
    option:
      - "yes"
      - "no"
dependencies:
  default:
  - django-graphbox==1.2.9
  - graphene-file-upload==1.3.0
  optional:
    - condition: database == "postgres"
      dependent:
      - psycopg[binary,pool]==3.1.14
    - condition: database == "mysql"
      dependent:
      - PyMySQL==1.1.0
    - condition: redis == "yes"
      dependent:
      - redis==5.0.4  
script:
  pip_install:
    description: Install package
    command:
    - pip install -r requirements.txt
  makemigrate:
    command:
    - python manage.py makemigrations
  migrate:
    command:
    - python manage.py migrate
  start:
    command:
    - python manage.py runserver
files:
  optional:
    - condition: docker == "yes"
      dependent:
      - file: Dockerfile

bootscript:
  - django-admin startproject {project_name}
